# C语言简介
* C11（也被称为C1X）指ISO标准ISO/IEC 9899:2011，是当前最新的C语言标准。在它之前的C语言标准为C99。
* 寄存器是CPU内部最基本的存储单元，CPU对外是通过总线(地址、控制、数据)来和外部设备交互的，总线的宽度是8位，同时CPU的寄存器也是8位，则该CPU称为8位CPU，内存中不会进行运算，而是加载到寄存器中再进行运算，若是反复交互，为节省效率会用到缓存，缓存越大CPU性能越好。
* C语言所有的库函数调用，只能保证语法一致，不能保证执行结果是一致的，同样的库函数在不同的操作系统下执行结果可能不同，Unix和Linux很多库函数都支持POSIX，代码互相移植代价小，但Windows支持的比较差，代码移植较麻烦；另外操作系统编码不一样也会造成乱码，Windows--gbk/gb2312/ANSI,linux--utf-8(unicode)
* * *
# C程序结构
```C
#include <stdio.h>

int main()
{
        //这是第一个C语言代码
        printf("hello C world\n");

        return 250;
}
```
* 使用某个函数`printf`前，需要用文件包含命令`include`包含对应头文件`<stdio.h>`，头文件类似于菜单，列举了菜名，函数调用相当于点菜，用`man 3 printf`可以查看头文件也可用`vi /usr/include/stdio.h`查看调用某个函数需要包含的头文件，`<>`包含系统标准的头文件，`""`包含自定义的头文件
* C语言每一句可执行行代码都用`;`结尾，且必须放在代码块里面，所有`#`开头的行都代表预编译指令，可以不用`;`结尾
* C语言的注释有两种，行注释`//要写的注释`是C标准的注释方式，块注释`/*要写的注释*/`是从C++借鉴而来
* C语言由函数组成，有且只有一个main函数，且程序运行从main函数开始，main函数由系统自动调用，不用人为调用，其他函数的调用必须放在`{}`内部
```C
#include <stdio.h>
#include <stdlib.h>

int main()
{
        //这是第一个C语言代码
        printf("hello C world\n");
        int a = system("./a.out");  //在已经运行的程序中，执行一个外部程序(命令)
        printf("hello C %d world\n",a);

        return 250;  // return 0\-1\1等等皆可让程序正常结束,只是在下一个程序的system调用时返回的a不一样
}
```
* * *
# 编译型语言，先用`gcc`编译为`a.out`机器语言，再执行
+ 编译分为四步,可以对应分步编译,某些教材翻译会将编译和汇编先后调换
> + 预处理：展开头文件(将头文件内代码移进来)/宏替换/去掉注释/条件编译，`gcc -E XXX.c -o XXX.i`预处理之后的文件后缀名为`i`
> + 编译：检查语法，生成汇编, `gcc -S XXX.i -o XXX.s`编译后的汇编文件后缀名为`s`,也可以一步直接将C语言文件编译为汇编文件
> + 汇编：汇编代码转换机器码, `gcc -c XXX.s -o XXX.o`编译后的目标文件后缀名为`o`
> + 链接：链接到一起生成可执行程序, `gcc XXX.o -o XXX`,可以通过`ldd XXX`查看依赖的动态库,Windows可以通过`Depends.exe`
> + 也可以`gcc XXX.c -shared -o XXX.so`编译为动态库以便其它语言调用
* * *
# C的基本语法
### C 的令牌（Token）
+ C 程序由各种令牌组成，令牌可以是关键字、标识符、常量、字符串值，或者是一个符号。例如，下面的 C 语句包括五个令牌：```printf("Hello, World! \n");```,这五个令牌分别是：`printf`、`(`、`"Hello, World! \n"`、`)`、`;`。
### 标识符
+ C 标识符是用来标识变量、函数，或任何其他用户自定义项目的名称。一个标识符以字母 A-Z 或 a-z 或下划线 _ 开始，后跟零个或多个字母、下划线和数字（0-9）。
+ C 标识符内不允许出现标点字符，比如`@`、`$`和`%`
+ C 是区分大小写的编程语言。
### C语言有32个关键字
* * *
# C 数据类型
* 在 C 语言中，数据类型指的是用于声明不同类型的变量或函数的一个广泛的系统。变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式，而数据类型的作用就是告诉编译器该类型的变量需要分配多少空间，来更合理的利用存储空间存储数据
* 计算机存储数字的方式：用补码方式存储1字节占8位
> * 原码：用户的数字分为正负数，符号位的存储，最高位为符号位(0为正数，1为负数)
>> * 原码存储导致2个问题：0有两种存储方式；正数负数相加计算结果不正确(计算机只会加不会减) 
>> * +1: `0000 0001`,-1: `1000 0001`,+0: `0000 0000`,-0: `1000 0000`
>> * 1-1 = 1 + -1 = `1000 0010`，结果为-2，计算错误
> * 反码：先求原码，正数不变，负数符号位不变，其他位都取反(0变为1,1变为0)
>> * 反码存在的问题是：0有两种存储方式
>> * -1：`1111 1110`,-0: `1111 1111`
>> * 1-1 = 1 + -1 = `1111 1111` = -0，用反码来算计算正确
> * 补码：正数原码反码补码一样，负数的补码为其反码加1
>> * -1: `1111 1111`,-0: `10000 0000`由于只存8位，所以与+0一致
>> * 1-1 = 1 + -1 = `0000 0000` = 0，用补码来算仍然计算正确
* 二进制与八进制互换：将二进制数从右往左每三个分一个八进制数
* 二进制：`010 111 101 010 101 010 010 101`
* 八进制：` 2   7   5   2   5   2   2   5 `
* 16进制的一位对应2进制的4位，同理可互换
* 8进制与16进制之间只有先转换为2进制才能互相转换
* 常量为程序运行中不允许修改的数据，而变量则可以修改，变量在使用之前必须定义标识符，并标有对应数据类型，标识符不能是关键字，只能由字母数字下划线组成，数字不能开头，区分大小写，且同一个`{}`内不能重复
* 1. 基本类型，包括整数类型和浮点型
* `char`1 字节	-128 到 127 或 0 到 255
* `unsigned char`1 字节	0 到 255
* `signed char`1 字节	-128 到 127
* `int`2 或 4 字节 	-32,768 到 32,767 或 -2,147,483,648 到 2,147,483,647
* `unsigned int`2 或 4 字节	0 到 65,535 或 0 到 4,294,967,295
* `short`2 字节	    -32,768 到 32,767
* `unsigned short`2 字节  	0 到 65,535
* `long`4 字节	-2,147,483,648 到 2,147,483,647
* `unsigned long`4 字节	0 到 4,294,967,295
> * `int b;`定义变量，分配内存空间
> * `extern int b;`声明变量，没有建立内存空间，不可以赋值
> * `const int b = 10;`修饰一个变量为只读，不允许修改
> * `int b = 10;`变量的初始化，即定义变量同时赋值
> * `b = 111;`变量的赋值是在定义之后的修改
> * `int a = -123;`默认以十进制方式赋值,先转换为二进制,补成4个字节,32位
> * `printf("%x\n",a);`十六进制默认以4个字节(32位)大小打印
> * 原码：`1000 0000 0000 0000 0000 0000 0111 1011`
> * 反码：`1111 1111 1111 1111 1111 1111 1000 0100`
> * 补码：`1111 1111 1111 1111 1111 1111 1000 0101`
> * 16进制`  f    f    f    f    f    f    5    1 `
> * `char a = 0b71;`用`0`开头以八进制，计算机会默认把后面的数字读成补码
> * `char b = 0xe5; printf("b = %d\n",b);`用`0x`开头以十六进制，后面仍然为补码
> * char b = 0xe5，转换为二进制，然后作为补码算原码，从补码算原码的步骤与从原码算补码的步骤一样
> * 补码：`1110 0101`、反码：`1001 1010`、原码：`1001 1011`，再转换为十进制就是 -27
> * `printf("%u\n",0x8000007b);`以上的打印都默认有符号，这里设置为无符号
>> * 有符号最高位为符号位，1为负数，0为正数
>> * `signed int a = -10`等价于`int a = -10`
>> * `unsigned int b = 10`以无符号方式定义
>> * `printf("%d\n",b)`即使b以无符号方式定义，输出结果以%d有符号方式为准
>> * 无符号最高位不是符号，是数字的一部分，无符号不可能是负数
```C
#include <stdio.h>
#define MAX 100  //定义一个宏定义的标识符，值为100的常量，代表之后出现的MAX预处理都会替换为100，并且不可修改

int main(int argc, char *argv[])
{
    printf("Hello C++ World before system!\n");
    printf("%d\n",MAX);  //以十进制方式打印
    printf("%o\n",MAX);  //以八进制方式打印
    printf("%x\n",MAX);  //以十六进制方式打印，%X 也可打印大写字母
    
    return 0;   
}
```
* 2. 枚举类型，也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。 
> + 
> + 
> + 
* 3. void类型，类型说明符 void 表明没有可用的值。
* 4. 派生类型，包括指针类型、数组类型、结构类型、共用体类型和函数类型。
* 数组类型和结构类型统称为聚合类型。函数的类型指的是函数返回值的类型。

* 9个控制语句, 34种运算符

* 图形化界面框架有Qt，MFC
