# C语言简介
* C11（也被称为C1X）指ISO标准ISO/IEC 9899:2011，是当前最新的C语言标准。在它之前的C语言标准为C99。
* 寄存器是CPU内部最基本的存储单元，CPU对外是通过总线(地址、控制、数据)来和外部设备交互的，总线的宽度是8位，同时CPU的寄存器也是8位，则该CPU称为8位CPU，内存中不会进行运算，而是加载到寄存器中再进行运算，若是反复交互，为节省效率会用到缓存，缓存越大CPU性能越好。
* C语言所有的库函数调用，只能保证语法一致，不能保证执行结果是一致的，同样的库函数在不同的操作系统下执行结果可能不同，Unix和Linux很多库函数都支持POSIX，代码互相移植代价小，但Windows支持的比较差，代码移植较麻烦；另外操作系统编码不一样也会造成乱码，Windows--gbk/gb2312/ANSI,linux--utf-8(unicode)
* * *
# C程序结构
```C
#include <stdio.h>

int main(int argc, char *argv[])
{
        //这是第一个C语言代码
        printf("hello C world\n");

        return 250;
}
```
* 使用某个函数`printf`前，需要用文件包含命令`include`包含对应头文件`<stdio.h>`，头文件类似于菜单，列举了菜名，函数调用相当于点菜，用`man 3 printf`可以查看头文件也可用`vi /usr/include/stdio.h`查看调用某个函数需要包含的头文件，`<>`包含系统标准的头文件，`""`包含自定义的头文件
* C语言每一句可执行行代码都用`;`结尾，且必须放在代码块里面，所有`#`开头的行都代表预编译或预处理指令，可以不用`;`结尾
* C语言的注释有两种，行注释`//要写的注释`是C标准的注释方式，块注释`/*要写的注释*/`是从C++借鉴而来
* C语言由函数组成，有且只有一个main函数，且程序运行从main函数开始，main函数由系统自动调用，不用人为调用，其他函数的调用必须放在`{}`内部
```C
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
        //这是第一个C语言代码
        printf("hello C world before system!\n");
        int a = system("./a.out");  //在已经运行的程序中，执行一个外部程序(命令)
        printf("hello C %d world\n",a);

        return 250;  // return 0\-1\1等等皆可让程序正常结束,只是在下一个程序的system调用时返回的a不一样
}
```
* * *
# 编译型语言，先用`gcc`编译为`a.out`机器语言，再执行
+ 编译分为四步,可以对应分步编译,某些教材翻译会将编译和汇编先后调换
> + 预处理：展开头文件(将头文件内代码移进来)/宏替换/去掉注释/条件编译，`gcc -E XXX.c -o XXX.i`预处理之后的文件后缀名为`i`
> + 编译：检查语法，生成汇编, `gcc -S XXX.i -o XXX.s`编译后的汇编文件后缀名为`s`,也可以一步直接将C语言文件编译为汇编文件
> + 汇编：汇编代码转换机器码, `gcc -c XXX.s -o XXX.o`编译后的目标文件后缀名为`o`
> + 链接：链接到一起生成可执行程序, `gcc XXX.o -o XXX`,可以通过`ldd XXX`查看依赖的动态库,Windows可以通过`Depends.exe`
> + 也可以`gcc XXX.c -shared -o XXX.so`编译为动态库以便其它语言调用
* * *
# C的基本语法
### C 的令牌（Token）
+ C 程序由各种令牌组成，令牌可以是关键字、标识符、常量、字符串值，或者是一个符号。例如，下面的 C 语句包括五个令牌：```printf("Hello, World! \n");```,这五个令牌分别是：`printf`、`(`、`"Hello, World! \n"`、`)`、`;`。
### 标识符
+ C 标识符是用来标识变量、函数，或任何其他用户自定义项目的名称。一个标识符以字母 A-Z 或 a-z 或下划线 _ 开始，后跟零个或多个字母、下划线和数字（0-9）。
+ C 标识符内不允许出现标点字符，比如`@`、`$`和`%`
+ C 是区分大小写的编程语言。
### C语言有32个关键字
* * *
# C 数据类型
* 在 C 语言中，数据类型指的是用于声明不同类型的变量或函数的一个广泛的系统。变量的类型决定了变量存储占用的空间，以及如何解释存储的位模式，而数据类型的作用就是告诉编译器该类型的变量需要分配多少空间，来更合理的利用存储空间存储数据
* 计算机存储数字的方式：用二进制的补码的方式存储，1字节占8位
> * 原码：用户的数字分为正负数，符号位的存储，最高位为符号位(0为正数，1为负数)
>> * 原码存储导致2个问题：0有两种存储方式；正数负数相加计算结果不正确(计算机只会加不会减) 
>> * +1: `0000 0001`,-1: `1000 0001`,+0: `0000 0000`,-0: `1000 0000`
>> * 1-1 = 1 + -1 = `1000 0010`，结果为-2，计算错误
> * 反码：先求原码，正数不变，负数符号位不变，其他位都取反(0变为1,1变为0)
>> * 反码存在的问题是：0有两种存储方式
>> * -1：`1111 1110`,-0: `1111 1111`
>> * 1-1 = 1 + -1 = `1111 1111` = -0，用反码来算计算正确
> * 补码：正数原码反码补码一样，负数的补码为其反码加1
>> * -1: `1111 1111`,-0: `10000 0000`由于只存8位，所以与+0一致
>> * 1-1 = 1 + -1 = `0000 0000` = 0，用补码来算仍然计算正确
* 二进制与八进制互换：将二进制数从右往左每3个分一个八进制数
* 二进制：`010 111 101 010 101 010 010 101`
* 八进制：` 2   7   5   2   5   2   2   5 `
* 十六进制的一位对应二进制的4位，而八进制与十六进制之间只有先转换为二进制才能互相转换
* 1. **基本类型**，按其取值是否可改变又可分为常量和变量
* 常量为程序运行中不允许修改的数据，符号常量：用标示符代表一个常量，在Ｃ语言中，可以用一个标识符来表示一个常量，称之为符号常量。符号常量在使用之前必须先定义，其一般形式为：`#define 标识符 常量`
> * 其中`#define`为宏定义的标识符，功能是把该标识符定义为其后的常量值，以后在程序中所有出现该标识符的地方均代之以该常量值。
* **习惯上符号常量的标识符用大写字母，变量标识符用小写字母**
* 变量则是可以修改的量，变量在使用之前必须定义标识符，并标有对应数据类型，标识符不能是关键字，只能由字母数字下划线组成，数字不能开头，区分大小写，且同一个`{}`内不能重复
* 1.1 **整型数据**,分为整型常量和整型变量
> * 整型常量有3种：十进制数，以`0`开头的八进制，以`0x`或`0X`开头的十六进制
> * 整型常量的后缀：在16位字长的机器上，基本整型的长度也为16位，因此表示的数的范围也是有限定的。十进制无符号整常数的范围为0～65535，有符号数为-32768～+32767。八进制无符号数的表示范围为0～0177777。十六进制无符号数的表示范围为0X0～0XFFFF或0x0～0xFFFF。如果使用的数超过了上述范围，就必须用长整型数来表示。长整型数是用后缀`L`或`l`来表示的。
* 整型变量，分为4种，具体占多少个字节跟系统和编译器规定有关
* 基本型`char`等价于`signed char`1个字节(`-128~127`)，`int`2 或 4 字节
> * `char`型数据的范围：`0000 0000~0111 1111`以及`1000 0000~1111 1111`
> * 其中的`1000 0000`是`-0`，但当作`-128`来用
>> * `-128`原码为:`1 1000 0000`,反码为`1 0111 1111`,补码为`1 1000 0000`,原码和补码一样,所以把`-0`当作`-128`
* 短整型`short`2 字节，-32,768 到 32,767
* 长整型`long`4 字节，`long long`8 字节
* 无符号型`unsigned char`1 字节，0 到 255、`unsigned int`2 或 4 字节、`unsigned short`2 字节，0 到 65,535、`unsigned long`4 字节，0 到 4,294,967,295
> * `int a,b;`定义变量，分配内存空间
> * `extern int b;`声明变量，没有建立内存空间，不可以赋值
> * `const int b = 10;`修饰一个变量为只读，不允许修改
> * `int b = 10;`变量的初始化，即定义变量同时赋值
> * `b = 111;`变量的赋值是在定义之后的修改
> * `int a = -123;`默认以十进制方式赋值,先转换为二进制,补成4个字节,32位
>> * `printf("%x\n",a);`十六进制默认以4个字节(32位)大小打印
>> * 原码：`1000 0000 0000 0000 0000 0000 0111 1011`
>> * 反码：`1111 1111 1111 1111 1111 1111 1000 0100`
>> * 补码：`1111 1111 1111 1111 1111 1111 1000 0101`
>> * 16进制`  f    f    f    f    f    f    5    1 `
> * `char b = 0xe5` 先转换为二进制，然后计算机会默认把后面的数字作为补码算原码，从补码算原码的步骤与从原码算补码的步骤一样
>> * 补码：`1110 0101`、反码：`1001 1010`、原码：`1001 1011`，再转换为十进制就是 -27
> * `printf("%u\n",0x8000007b);`以上的打印都默认有符号，这里设置为无符号,无符号最高位不是符号，是数字的一部分，无符号不可能是负数；而有符号最高位为符号位，1为负数，0为正数
> * `signed int a = -10`等价于`int a = -10`
> * `printf("%d\n",b)`即使b以无符号方式定义，输出结果以%d有符号方式为准
* 整形数据的溢出，如下例
* 32767:`0111111111111111`、-32768:`1000000000000000`
```C
#include <stdio.h>
#include <limits.h>
#define MAX 1  //定义一个值为1的常量，代表之后出现的MAX预处理都会替换为1，并且不可修改

void main()
{
    short int a,b;  //2个字节，最大16位，首位符号，数字取值最多2^15=32768个，包括0
    a = 32767;  //故最大值为32767
    b = a + MAX;  //再加1就变成了负数的最大数
    printf("int 存储大小 : %lu \n", sizeof(int));
    printf("%d\n",b);  //以十进制方式打印 结果为-32768
    printf("%o\n",b);  //以八进制方式打印 结果为37777700000
    printf("%x\n",b);  //以十六进制方式打印，%X 也可打印大写字母 结果为ffff8000
    printf("%hd\n",b);   //以短整型方式打印
}
```
* 1.2 **实型数据**(浮点型)
> * 在C语言中，实型常量也称为实数或浮点数，只采用十进制，有小数形式和指数形式
>> * 比如`5.0`(必须有小数点)、`2.1E5`(相当于`2.1*10^5`)
>> * 允许使用后缀`f`或`F`表示小数点，即`5.`等价于`5f`
> * 一般占4个字节，按指数形式存储，分为符号、小数部分、指数部分
>> * 小数部分占的位(bit)数越多，数的有效数字越多，精度越高
>> * 指数部分占的位(bit)数越多，数的值范围越大
```C
#include <stdio.h>
#include <float.h>
 
int main()
{
   printf("float 存储最大字节数 : %lu \n", sizeof(float));
   printf("float 最小值: %E\n", FLT_MIN );   //头文件 float.h 定义了宏
   printf("float 最大值: %E\n", FLT_MAX );   //%E 为以指数形式输出单、双精度实数
   printf("精度值: %d\n", FLT_DIG );
   
   return 0;
}
```
> * 实型变量分为单精度(`float`)、双精度(`double`)、长双精度(`long double`)三类
> * 包含`math`库的文件需要用`gcc XXX.c -lm`编译
```C
#include <math.h>
#include <stdio.h>

void main()
{
        double x, s;
        int a;
        printf("input number:");  //只负责输出
        scanf("%lf",&x);   //输入函数内不可写中文，阻塞等待用户按回车结束
        s = sin(x);
        a = sizeof(x);
        printf("sizeof %lf is %d\n",x,a);    //sizeof也可以赋值操作
        printf("sin of %lf is %lf\n", x, s);
}
```
> * 实型数据的舍入误差
```C
#include <stdio.h>

void main()
{
        float a,b;
        a = 123456.789e5;   //超出了float的范围
        b = a + 20;    //加了和不加值一样
        printf("%f\n",a);
        printf("%f\n",b);
}
```
> * 经典例题
```C
#include <stdio.h>

void main()
{
        printf("%f\n",1.0/3*3);  //1.000000
        printf("%d\n",3/2);      //1
        printf("%d\n",1/3*3);    //0
}
```
* 1.3 **字符型数据**有四种
> * 字符常量用单引号括起来的单个字符，而非字符串
> * 转义字符是一种特殊的字符常量，转义字符以`\`开头，具有特殊的含义
```C
#include <stdio.h>

void main()
{
  int a,b,c;
  a=5; b=6; c=7;
  printf(“  ab  c\tde\rf\n”);   //f ab  c de
  printf(“hijk\tL\bM\n”);       //hijk    M
}
```
> * 字符变量的类型说明符为`char`，书写格式同整型
> * 每个字符变量被分配一个字节的内存空间，因此只能存放一个字符。字符值是以ASCII码的形式存放在变量的内存单元之中的。如：`a = 'X'`，x的十进制ASCII码是120，实际上是在a这个单元内存放120的二进制代码
```C
#include <stdio.h>

void main()
{
  char a,b;
  a=120;                   //可以写成a='x'
  b=121;                   //也可写成b='y'
  printf("%c,%c\n",a,b);   //x,y
  printf("%d,%d\n",a,b);   //120,121
}
```
> * 小写字母变换为大写字母
```C
#include <stdio.h>

void main()
{
  char a,b;    //也可以写成int，只不过char更省内存空间
  a='a';
  b='b';
  a=a-32;
  b=b-32;
  printf("%c,%c,%d,%d\n",a,b,a,b);  //A,B,65,66
}
```
> * 字符串常量是由一对双引号括起的字符序列，可以包含多个字符
> * 可以把一个字符常量赋予一个字符变量，但不能把一个字符串常量赋予一个字符变量。例如：可以`char a = 'a';`不能 `char a = "a";`
> * 字符常量占一个字节的内存空间。字符串常量占的内存字节数等于字符串中字节数加1。增加的一个字节中存放字符"\0" (ASCII码为0)。这是字符串结束的标志。
![例子](https://github.com/DodgeV/learning-programming/blob/master/png/%E6%89%B9%E6%B3%A8%202020-08-15%20134901.png)
* 2. **枚举类型**，也是算术类型，被用来定义在程序中只能赋予其一定的离散整数值的变量。 
> + 
> + 
> + 
* 3. **空类型**(void类型)，类型说明符为void，表明没有可用返回的值。
* 4. **派生类型**，包括**指针类型**、数组类型、结构体类型、共用体类型和函数类型。
* 数组类型和结构体类型统称为聚合类型，也可以将数组、结构体、共用体统称为构造类型
* 函数类型指的是函数返回值的类型。

* 9个控制语句, 34种运算符

* 图形化界面框架有Qt，MFC
